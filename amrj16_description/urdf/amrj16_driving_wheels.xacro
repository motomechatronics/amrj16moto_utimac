<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="amrj16">

 <!-- xacro driving wheel link-->
    <xacro:macro name="wheel" params="wheel_name">

            <link name="${wheel_name}">            
        <visual>

            <xacro:if value="${wheel_name == 'right_wheel'}"> 
                <origin xyz="0 0 0" rpy="0 3.14159 0"/>
            </xacro:if>

            <xacro:if value="${wheel_name == 'left_wheel'}">
                <origin xyz="0 0 0" rpy="0 0 0"/>
            </xacro:if>

            <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://amrj16_description/models/meshes/amrj16_driving_wheel.dae"/>
                </geometry>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="0.1030" length="0.030"/>
            </geometry>
        </collision>

        <inertial>
            <mass value="4.2"/>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <inertia ixx="0.0093615284" ixy="0.0" ixz="0.000036838188" iyy="0.0093614132" iyz="0" izz="0.016609222"/>            
        </inertial>
    </link>
    </xacro:macro>

    <!-- xacro joint-->
    <xacro:macro name="chassis_wheel_joint" params="chassis_wheel_joint_name wheel_name x_m y_m z_m roll_rad">
    <joint name="${chassis_wheel_joint_name}" type="continuous">
        <origin xyz="${x_m} ${y_m} ${z_m}" rpy="${roll_rad} 0 0"/>
        <parent link="chassis"/>
        <child link="${wheel_name}"/>
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" velocity="100.0" />
        <dynamics damping="0.0" friction="0.1"/>
    </joint>
    </xacro:macro>

    <!-- right wheel-->
    <xacro:wheel wheel_name="right_wheel"/> 
    <xacro:chassis_wheel_joint chassis_wheel_joint_name="chassis_right_wheel_joint"  
                                    wheel_name="right_wheel" 
                                    x_m="0" 
                                    y_m="${rightWheelYPos_m}" 
                                    z_m="${rightWheelZPos_m}"
                                    roll_rad="${rightWheelRollAttitude_rad}"/>

    <gazebo reference="right_wheel">
        <kp>1000000000000000000000000000.0</kp>
        <kd>1000000000000000000000000000.0</kd>
        <mu1>10.0</mu1>
        <mu2>10.0</mu2>
        
    </gazebo>


    <!-- left wheel-->
    <xacro:wheel wheel_name="left_wheel"/>
    <xacro:chassis_wheel_joint chassis_wheel_joint_name="chassis_left_wheel_joint"  
                                    wheel_name="left_wheel" 
                                    x_m="0" 
                                    y_m="${leftWheelYPos_m}" 
                                    z_m="${leftWheelZPos_m}"
                                    roll_rad="${leftWheelRollAttitude_rad}"/>

    <gazebo reference="left_wheel">
        <kp>1000000000000000000000000000.0</kp>
        <kd>1000000000000000000000000000.0</kd>
        <mu1>10.0</mu1>
        <mu2>10.0</mu2>       
    </gazebo>

    </robot>